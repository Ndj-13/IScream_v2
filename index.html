<!DOCTYPE html>
<html lang ="es">
    <head>
        <meta charset="UTF-8">
        <!--meta http-equiv="X-UA-Compatible" content="IE=edge"-->
        <title>IScream vol.2</title>
        <script src="https://cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
        <style type="text/css">
            body{
                margin: 0;
            }
        </style>
        
    </head>

    <body>
        <!--div id="container"></div-->
        
        <!--script type="text/javascript" src="src/js/game.js"></script-->
        <script type="text/javascript">

            var PantallaCarga = new Phaser.Class({
                Extends: Phaser.Scene,

                initialize:

                    function PantallaCarga(){
                        Phaser.Scene.call(this, {key:'PantallaCarga'});
                    },

                preload: function(){
                    this.load.image('logo', 'resources/img/interface/BakeryStudiosLogo.png');

                    let loadingBar = this.add.graphics({
                        fillStyle: {
                            color: 0xde72ca
                        }
                    })
                    this.load.image('loading', 'resources/img/interface/cabezaMorada.png');

                    //Barra de carga
                    this.load.on("progress", (percent)=>{
                        this.time.delayedCall(1000, () => {
                        loadingBar.fillRect(100, 350, 600*percent, 40);
                        console.log(percent);
                        });
                    })
                    this.load.on("complete", ()=>{
                        console.log('done');
                    })
                },
                create: function()
                {
                    this.add.image(400, 300, 'logo');
                    this.helado = this.add.image(100, 370, 'loading');
                    this.helado.setScale(1.3);
  
                    this.time.delayedCall(2000, () => {
                        this.scene.start('PantallaInicio');
                    });
                },
                update: function(){

                }
            });

            var PantallaInicio = new Phaser.Class({
                Extends: Phaser.Scene,

                initialize:

                function PantallaInicio(){
                    Phaser.Scene.call(this, {key:'PantallaInicio'});
                },

                preload: function(){
                    this.load.image('background', 'resources/img/interface/pantallaInicio.png');
                    this.load.image('title', 'resources/img/interface/LogoI-ScreamFondoBlanco.png');
                },
                create: function(){
                    this.add.image(400, 300, 'background');
                    this.add.image(game.renderer.width/2, 200, 'title');
                },
                update: function(){

                }
            })

            var config = {
                type: Phaser.AUTO,
                width: 800,
                height: 600,
                pixelArt: true,
                physics: {
                    default: 'arcade',
                    arcade: {
                        gravity: {y: 0},
                        debug: false
                    }
                },
        
                backgroundColor: '#5B2970',
        
                /*scene: {
                    preload: preload,
                    create: create,
                    update: update
                }*/
                scene: [PantallaCarga, PantallaInicio]
            };
        
            var game = new Phaser.Game(config);
            
            
        </script>
        
    </body>
</html>